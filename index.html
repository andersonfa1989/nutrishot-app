<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>NutriShot Elements - Pro</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6941311170472131" crossorigin="anonymous"></script>

    <style>
        :root { 
            --primary: #2ab573; 
            --blue: #2490eb; 
            --bg: #f4f7f6; 
            --white: #ffffff;
            --text: #2c3e50;
            --gray: #95a5a6;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); padding-bottom: 70px; }

        /* Sidebar */
        .sidebar { position: fixed; top: 0; left: -280px; width: 280px; height: 100%; background: white; z-index: 10000; transition: 0.3s; box-shadow: 2px 0 15px rgba(0,0,0,0.1); }
        .sidebar.active { left: 0; }
        .sidebar-header { padding: 40px 20px; background: linear-gradient(135deg, var(--blue), var(--primary)); color: white; }
        .menu-item { padding: 15px 25px; cursor: pointer; border-bottom: 1px solid #f5f5f5; font-weight: 600; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; z-index: 9999; backdrop-filter: blur(2px); }
        .overlay.active { display: block; }

        /* UI */
        .container { padding: 20px; max-width: 500px; margin: 0 auto; }
        .card { background: var(--white); border-radius: 24px; padding: 20px; margin-bottom: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); border: 1px solid #eee; }
        .logo-text { font-weight: 800; font-size: 24px; background: linear-gradient(135deg, var(--blue), var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; margin: 20px 0; }
        
        .btn-main { width: 100%; padding: 18px; border-radius: 30px; border: none; background: linear-gradient(135deg, var(--blue), var(--primary)); color: white; font-weight: bold; font-size: 16px; cursor: pointer; margin-top: 10px; }
        .input-field { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ddd; margin-bottom: 10px; font-size: 16px; outline: none; }

        /* Stats */
        .grid-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .stat-box { background: white; padding: 15px; border-radius: 20px; text-align: center; border: 1px solid #eee; }
        .stat-val { display: block; font-size: 20px; font-weight: bold; color: var(--blue); }
        
        .bar-container { width: 100%; height: 8px; background: #eee; border-radius: 10px; margin-top: 8px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--primary); transition: 0.5s; }

        /* IA Loader */
        .ia-loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 20000; display: none; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; }
        .spinner { width: 50px; height: 50px; border: 5px solid #333; border-top: 5px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Ads */
        .ad-fixed { position: fixed; bottom: 0; width: 100%; height: 60px; background: #fff; border-top: 1px solid #ddd; display: flex; justify-content: center; align-items: center; z-index: 900; }
    </style>
</head>
<body>

    <div id="ia-screen" class="ia-loading">
        <div class="spinner"></div>
        <h3 id="ia-msg" style="margin-top:20px">Analisando Dados...</h3>
    </div>

    <div id="sidebar-bg" class="overlay" onclick="toggleMenu()"></div>
    <div id="sidebar-menu" class="sidebar">
        <div class="sidebar-header">
            <b style="font-size:20px">NutriShot Pro</b><br>
            <small id="user-side-name">Usu√°rio</small>
        </div>
        <div class="menu-item" onclick="navegar('home')">üè† Dashboard</div>
        <div class="menu-item" onclick="gerarPlanoIA()">ü•ó Plano Alimentar IA</div>
        <div class="menu-item" onclick="resetar()">üö™ Sair</div>
    </div>

    <div id="app"></div>

    <div class="ad-fixed">
        <ins class="adsbygoogle" style="display:inline-block;width:320px;height:50px" data-ad-client="ca-pub-6941311170472131" data-ad-slot="2257554053"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <script>
        // Banco de Dados Unificado
        let db = JSON.parse(localStorage.getItem('nutrishot_final')) || {
            logado: false,
            user: { nome: "", peso: 0, altura: 0, objetivo: "perda" },
            macros: { kcal: 2000, p: 0, c: 0, g: 0 },
            agua: 0,
            tela: 'cadastro'
        };

        function salvar() { localStorage.setItem('nutrishot_final', JSON.stringify(db)); render(); }
        function navegar(t) { db.tela = t; if(t==='home') toggleMenu(false); salvar(); }
        function toggleMenu(force) { 
            const s = document.getElementById('sidebar-menu');
            const b = document.getElementById('sidebar-bg');
            if(force === false) { s.classList.remove('active'); b.classList.remove('active'); }
            else { s.classList.toggle('active'); b.classList.toggle('active'); }
        }

        function calcularNutricao() {
            const p = db.user.peso;
            if(db.user.objetivo === 'perda') {
                db.macros.kcal = Math.round(p * 25);
                db.macros.p = p * 2; db.macros.g = p * 0.7;
            } else {
                db.macros.kcal = Math.round(p * 35);
                db.macros.p = p * 2.2; db.macros.g = p * 1;
            }
            db.macros.c = Math.round((db.macros.kcal - (db.macros.p * 4) - (db.macros.g * 9)) / 4);
        }

        function gerarPlanoIA() {
            const loader = document.getElementById('ia-screen');
            loader.style.display = 'flex';
            setTimeout(() => {
                loader.style.display = 'none';
                navegar('home');
                alert("Plano IA Atualizado com sucesso!");
            }, 2000);
        }

        function resetar() { localStorage.clear(); location.reload(); }

        function render() {
            const root = document.getElementById('app');
            
            if (!db.logado) {
                root.innerHTML = `
                <div class="container">
                    <div class="logo-text">NutriShot Elements</div>
                    <div class="card">
                        <input type="text" id="in-nome" class="input-field" placeholder="Seu Nome">
                        <input type="number" id="in-peso" class="input-field" placeholder="Peso (kg)">
                        <input type="number" id="in-altura" class="input-field" placeholder="Altura (cm)">
                        <select id="in-obj" class="input-field">
                            <option value="perda">Perda de Peso</option>
                            <option value="ganho">Ganho de Massa</option>
                        </select>
                        <button class="btn-main" onclick="entrar()">CRIAR MINHA CONTA</button>
                    </div>
                </div>`;
                return;
            }

            document.getElementById('user-side-name').innerText = db.user.nome;

            if (db.tela === 'home') {
                root.innerHTML = `
                <div style="padding:20px; display:flex; justify-content:space-between; align-items:center;">
                    <div onclick="toggleMenu()" style="font-size:24px; cursor:pointer">‚ò∞</div>
                    <div class="logo-text" style="margin:0">NutriShot</div>
                    <div style="width:24px"></div>
                </div>
                <div class="container">
                    <div class="card" style="background:linear-gradient(135deg, #2c3e50, #000); color:white; border:none">
                        <small style="opacity:0.7">Meta Di√°ria</small>
                        <div style="font-size:32px; font-weight:bold">${db.macros.kcal} kcal</div>
                        <div style="display:flex; gap:15px; margin-top:10px; font-size:12px">
                            <span>P: ${db.macros.p}g</span> <span>C: ${db.macros.c}g</span> <span>G: ${db.macros.g}g</span>
                        </div>
                    </div>

                    <div class="grid-stats">
                        <div class="stat-box">
                            <small>√Ågua</small>
                            <b class="stat-val">${db.agua}ml</b>
                            <div class="bar-container"><div class="bar-fill" style="width:${(db.agua/3000)*100}%; background:var(--blue)"></div></div>
                            <button onclick="db.agua+=250; salvar()" style="border:none; background:none; color:var(--blue); margin-top:10px; font-weight:bold">+ 250ml</button>
                        </div>
                        <div class="stat-box">
                            <small>IMC</small>
                            <b class="stat-val">${(db.user.peso / ((db.user.altura/100)**2)).toFixed(1)}</b>
                            <div style="font-size:10px; color:var(--gray); margin-top:10px">Status: Normal</div>
                        </div>
                    </div>

                    <button class="btn-main" onclick="gerarPlanoIA()" style="margin-top:20px">‚ú® GERAR REFEI√á√ïES IA</button>
                </div>`;
            }
        }

        function entrar() {
            const n = document.getElementById('in-nome').value;
            const p = document.getElementById('in-peso').value;
            const a = document.getElementById('in-altura').value;
            if(!n || !p || !a) return alert("Preencha tudo!");
            
            db.user = { nome: n, peso: parseFloat(p), altura: parseFloat(a), objetivo: document.getElementById('in-obj').value };
            db.logado = true;
            db.tela = 'home';
            calcularNutricao();
            salvar();
        }

        render();
    </script>
</body>
</html>
