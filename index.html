<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>NutriShot Elements</title>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6941311170472131" crossorigin="anonymous"></script>

<style>
:root{
 --primary:#2ab573;
 --blue:#2490eb;
 --bg:#f9fafb;
 --water:#3498db;
}
body{
 margin:0;
 font-family:Segoe UI,Roboto,sans-serif;
 background:var(--bg);
 padding-bottom:90px;
}
.card{
 background:#fff;
 border-radius:18px;
 padding:18px;
 margin:15px 20px;
 border:1px solid #eee;
}
.sidebar{
 position:fixed;
 top:0; left:-280px;
 width:280px; height:100%;
 background:#fff;
 z-index:1000;
 transition:.3s;
 box-shadow:2px 0 15px rgba(0,0,0,.1);
}
.sidebar.active{left:0}
.sidebar-header{
 padding:40px 20px;
 background:linear-gradient(135deg,var(--blue),var(--primary));
 color:#fff;
}
.menu-item{
 padding:15px 25px;
 cursor:pointer;
 font-weight:500;
}
.menu-item:hover{background:#f0f7f4}
.overlay{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.4);
 display:none;
 z-index:999;
}
.overlay.active{display:block}
.fab{
 position:fixed;
 bottom:100px;
 right:20px;
 width:60px; height:60px;
 border-radius:50%;
 background:#000;
 color:#fff;
 font-size:28px;
 border:none;
}
.banner-fixed{
 position:fixed;
 bottom:0; left:0;
 width:100%;
 background:#fff;
 padding:5px 0;
 border-top:1px solid #ddd;
 z-index:999;
}
.progress{
 height:10px;
 background:#eee;
 border-radius:10px;
 overflow:hidden;
}
.progress div{
 height:100%;
 background:var(--primary);
}
canvas{width:100%}
</style>
</head>

<body>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<div class="sidebar" id="sidebar">
 <div class="sidebar-header">
  <b>NutriShot</b><br>
  <small id="userName"></small>
 </div>
 <div class="menu-item" onclick="nav('home')">üè† Dashboard</div>
 <div class="menu-item" onclick="nav('historico')">üìú Hist√≥rico Di√°rio</div>
 <div class="menu-item" onclick="nav('grafico')">üìä Gr√°fico Semanal</div>
 <div class="menu-item" onclick="ativarPremium()">üíé Premium</div>
 <div class="menu-item" onclick="logout()" style="color:#e74c3c">üö™ Sair</div>
</div>

<div id="app"></div>

<div class="banner-fixed" id="banner">
 <ins class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-6941311170472131"
  data-ad-slot="2257554053"
  data-ad-format="auto"></ins>
</div>

<script>
const estado = JSON.parse(localStorage.getItem("nutrishot_v6")) || {
 logado:false,
 nome:"Usu√°rio",
 calorias:0,
 agua:0,
 historico:[],
 premium:false,
 tela:"home",
 ultimoReset:""
};

function salvar(){
 localStorage.setItem("nutrishot_v6",JSON.stringify(estado));
}

function toggleMenu(){
 sidebar.classList.toggle("active");
 overlay.classList.toggle("active");
}

function nav(t){
 estado.tela=t;
 salvar();
 render();
 toggleMenu();
}

function logout(){
 estado.logado=false;
 salvar();
 render();
}

function resetDiario(){
 const hoje=new Date().toDateString();
 if(estado.ultimoReset!==hoje){
  estado.calorias=0;
  estado.agua=0;
  estado.historico=[];
  estado.ultimoReset=hoje;
  salvar();
 }
}

function addRefeicao(){
 const cal=Math.floor(Math.random()*400+300);
 estado.calorias+=cal;
 estado.historico.push({
  tipo:"Refei√ß√£o",
  cal,
  agua:0,
  data:new Date().toDateString()
 });
 salvar();
 render();
}

function beberAgua(){
 estado.agua+=250;
 estado.historico.push({
  tipo:"√Ågua",
  cal:0,
  agua:250,
  data:new Date().toDateString()
 });
 salvar();
 render();
}

function ativarPremium(){
 estado.premium=true;
 salvar();
 alert("Premium ativado!");
 render();
}

function render(){
 resetDiario();
 document.getElementById("userName").innerText=estado.nome;
 banner.style.display=estado.premium?"none":"block";

 if(!estado.logado){
  app.innerHTML=`
   <div style="padding:40px;text-align:center">
    <h2>NutriShot Elements</h2>
    <input placeholder="Seu nome" id="n" style="padding:10px">
    <br><br>
    <button onclick="estado.nome=n.value||'Usu√°rio';estado.logado=true;salvar();render()">Entrar</button>
   </div>`;
  return;
 }

 if(estado.tela==="home"){
  app.innerHTML=`
   <div style="padding:20px">
    <div onclick="toggleMenu()">‚ò∞</div>
    <div class="card">
     <b>Calorias</b>
     <h2>${estado.calorias} kcal</h2>
     <div class="progress"><div style="width:${Math.min(estado.calorias/2500*100,100)}%"></div></div>
    </div>

    <div class="card">
     <b>Hidrata√ß√£o</b>
     <h2>${estado.agua} ml</h2>
     <button onclick="beberAgua()">+250ml</button>
    </div>
   </div>
   <button class="fab" onclick="addRefeicao()">+</button>`;
 }

 if(estado.tela==="historico"){
  app.innerHTML=`
   <div style="padding:20px">
    <h3>Hist√≥rico</h3>
    ${estado.historico.map(h=>`
     <div class="card">
      <b>${h.tipo}</b><br>
      ${h.cal? h.cal+" kcal":""}
      ${h.agua? h.agua+" ml":""}
      <small>${h.data}</small>
     </div>`).join("")}
   </div>`;
 }

 if(estado.tela==="grafico"){
  app.innerHTML=`
   <div style="padding:20px">
    <h3>Gr√°fico Semanal</h3>
    <canvas id="graf"></canvas>
   </div>`;
  desenharGrafico();
 }
}

function desenharGrafico(){
 const ctx=document.getElementById("graf").getContext("2d");
 const dias=[0,0,0,0,0,0,0];
 estado.historico.forEach(h=>{
  const d=new Date(h.data).getDay();
  const i=d===0?6:d-1;
  dias[i]+=h.cal;
 });
 ctx.clearRect(0,0,300,150);
 dias.forEach((v,i)=>{
  ctx.fillStyle="#2ab573";
  ctx.fillRect(30+i*40,140-v/20,25,v/20);
 });
}

render();
</script>
</body>
</html>
