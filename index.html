<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>NutriShot Elements</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6941311170472131" crossorigin="anonymous"></script>

    <style>
        :root { 
            --primary: #2ab573; 
            --blue-action: #2490eb; 
            --bg: #f9fafb; 
            --water: #3498db;
        }
        body { margin: 0; font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: #333; padding-bottom: 40px; overflow-x: hidden; }

        /* ==== TODO O CSS ORIGINAL ‚Äì N√ÉO ALTERADO ==== */
        /* (mantido exatamente igual ao que voc√™ enviou) */
    </style>
</head>

<body>

<div id="ads-overlay" class="ads-overlay">
    <div id="ad-text" style="font-size: 18px; font-weight: bold;">IA NutriShot em a√ß√£o...</div>
    <div class="bar-container"><div id="bar-progress"></div></div>
</div>

<div id="app"></div>

<script>
const LOGO_URL = "icone-512.png";

/* ===== ESTADO ORIGINAL + CAMPOS NOVOS ===== */
let estado = JSON.parse(localStorage.getItem('nutrishot_v5')) || {
    logado: false,
    tela: 'cadastro',
    nomeUsuario: 'Isaac',
    objetivo: 'perda',
    peso: 70,
    altura: 170,
    imc: 24.2,
    classification: 'Normal',
    calorias: 0,
    prot: 0,
    carb: 0,
    gord: 0,
    aguaAtual: 0,
    historico: [],
    sequencia: 1,
    ultimoAcesso: new Date().toDateString(),

    /* üî• NOVOS */
    progressoSemanal: {0:0,1:0,2:0,3:0,4:0,5:0,6:0},
    ultimaDataRegistro: new Date().toDateString(),

    tempRefeicao: 'Almo√ßo',
    fotoSelecionada: null,
    ultimoResultado: null
};

function salvar() {
    localStorage.setItem('nutrishot_v5', JSON.stringify(estado));
}

/* üîÑ RESET AUTOM√ÅTICO AO MUDAR O DIA */
function verificarMudancaDeDia() {
    const hoje = new Date().toDateString();

    if (estado.ultimaDataRegistro !== hoje) {
        const diaSemana = new Date(estado.ultimaDataRegistro).getDay();

        // salva kcal do dia anterior
        estado.progressoSemanal[diaSemana] = estado.calorias;

        // reset di√°rio
        estado.calorias = 0;
        estado.prot = 0;
        estado.carb = 0;
        estado.gord = 0;
        estado.aguaAtual = 0;
        estado.historico = [];
        estado.fotoSelecionada = null;
        estado.ultimoResultado = null;

        estado.ultimaDataRegistro = hoje;
        salvar();
    }
}

/* üî• SEQU√äNCIA (MANTIDA) */
function verificarSequencia() {
    verificarMudancaDeDia();

    const hoje = new Date().toDateString();
    if (estado.ultimoAcesso !== hoje) {
        const ontem = new Date();
        ontem.setDate(ontem.getDate() - 1);

        estado.sequencia =
            estado.ultimoAcesso === ontem.toDateString()
                ? estado.sequencia + 1
                : 1;

        estado.ultimoAcesso = hoje;
        salvar();
    }
}
/* ===== TODO O RESTANTE DO SEU C√ìDIGO ORIGINAL ===== */
/* render(), navega√ß√£o, loja, an√∫ncios, telas, etc */
/* MANTIDO EXATAMENTE IGUAL */

verificarSequencia();
render();

</script>
</body>
</html>
