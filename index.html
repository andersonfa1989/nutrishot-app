<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
<title>NutriShot Elements</title>

<!-- AdSense / AdMob Web -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6941311170472131"
crossorigin="anonymous"></script>

<style>
:root{
--primary:#2ab573;
--blue-action:#2490eb;
--bg:#f9fafb;
--water:#3498db;
}
body{margin:0;font-family:Segoe UI,Roboto,sans-serif;background:var(--bg);color:#333;padding-bottom:60px;}
.card{background:#fff;border-radius:20px;padding:20px;margin:15px 20px;border:1px solid #eee;}
.btn{background:var(--primary);color:#fff;border:none;padding:12px;border-radius:12px;font-weight:bold;width:100%;}
.sidebar{position:fixed;top:0;left:-280px;width:280px;height:100%;background:#fff;transition:.3s;z-index:1000}
.sidebar.active{left:0}
.sidebar-menu .menu-item{padding:15px 20px;cursor:pointer;border-bottom:1px solid #eee}
.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:999}
.sidebar-overlay.active{display:block}
.refeicao-item{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #eee}
.ad-banner-container{margin:20px;background:#eee;border-radius:15px;overflow:hidden}
</style>
</head>

<body>

<div id="sidebar-overlay" class="sidebar-overlay" onclick="toggleMenu()"></div>

<div id="sidebar" class="sidebar">
    <div class="sidebar-menu">
        <div class="menu-item" onclick="menuNav('home')">ğŸ  Dashboard</div>
        <div class="menu-item" onclick="menuNav('historico')">ğŸ“Š HistÃ³rico DiÃ¡rio</div>
        <div class="menu-item" onclick="menuNav('catalogo')">ğŸ›’ Suplementos</div>
        <div class="menu-item" onclick="estado.logado=false; salvar(); render()">ğŸšª Sair</div>
    </div>
</div>

<div id="app"></div>

<script>
// =============================
// ADMOB IDS
// =============================
const ADMOB={
APP_ID:'ca-app-pub-6941311170472131~1202658535',
BANNER_ID:'ca-app-pub-6941311170472131/2257554053'
};

// =============================
let estado=JSON.parse(localStorage.getItem('nutrishot'))||{
logado:true,
tela:'home',
nomeUsuario:'UsuÃ¡rio',
peso:70,
aguaAtual:0,
historico:[],
ultimoReset:null
};

function salvar(){localStorage.setItem('nutrishot',JSON.stringify(estado));}

// =============================
// MENU
// =============================
function toggleMenu(){
document.getElementById('sidebar').classList.toggle('active');
document.getElementById('sidebar-overlay').classList.toggle('active');
}
function menuNav(t){toggleMenu();estado.tela=t;render();}

// =============================
// ADS
// =============================
function carregarBannerAdMob(){
try{(adsbygoogle=window.adsbygoogle||[]).push({});}
catch(e){console.log("Ads ainda nÃ£o pronto");}
}

// =============================
// ÃGUA
// =============================
function beberAgua(){
estado.aguaAtual+=250;
estado.historico.push({
tipo:'Ãgua',
cal:0,
data:new Date().toDateString()
});
salvar();render();
}

// =============================
// HISTÃ“RICO POR DIA
// =============================
function historicoPorDia(){
const dias={};
estado.historico.forEach(h=>{
if(!dias[h.data]) dias[h.data]={cal:0,itens:[]};
dias[h.data].cal+=h.cal;
dias[h.data].itens.push(h);
});
return dias;
}

// =============================
// RESET DIÃRIO
// =============================
function verificarReset(){
const hoje=new Date().toDateString();
if(estado.ultimoReset!==hoje){
estado.aguaAtual=0;
estado.ultimoReset=hoje;
salvar();
}
}

// =============================
// RENDER
// =============================
function render(){
verificarReset();
const root=document.getElementById('app');

if(estado.tela==='home'){
root.innerHTML=`
<div style="padding:20px;display:flex;justify-content:space-between">
<div onclick="toggleMenu()">â˜°</div>
<b>OlÃ¡, ${estado.nomeUsuario}</b>
</div>

<div class="card">
<b>HidrataÃ§Ã£o</b>
<p>${estado.aguaAtual} ml</p>
<button class="btn" onclick="beberAgua()">+ 250ml</button>
</div>

<div class="ad-banner-container">
<ins class="adsbygoogle"
id="banner-dashboard"
style="display:block"
data-ad-client="ca-pub-6941311170472131"
data-ad-slot="2257554053"
data-ad-format="auto"
data-ad-full-width-responsive="true"></ins>
</div>
`;
setTimeout(carregarBannerAdMob,300);
return;
}

if(estado.tela==='historico'){
const dados=historicoPorDia();
const datas=Object.keys(dados).sort((a,b)=>new Date(b)-new Date(a));
root.innerHTML=`
<div style="padding:20px">
<div onclick="menuNav('home')" style="cursor:pointer;color:var(--blue-action)">â† Voltar</div>
<h2>HistÃ³rico DiÃ¡rio</h2>

${datas.length===0?'<p>Nenhum registro</p>':
datas.map(d=>`
<div class="card">
<b>${d}</b>
<p>ğŸ”¥ ${dados[d].cal} kcal</p>
${dados[d].itens.map(i=>`
<div class="refeicao-item">
<span>${i.tipo}</span>
<span>${i.cal>0?i.cal+' kcal':'ğŸ’§'}</span>
</div>`).join('')}
</div>`).join('')}
</div>`;
return;
}

if(estado.tela==='catalogo'){
root.innerHTML=`
<div style="padding:20px">
<div onclick="menuNav('home')" style="cursor:pointer;color:var(--blue-action)">â† Voltar</div>
<h2>CatÃ¡logo</h2>
<p>Em breve...</p>
</div>`;
}
}

render();
</script>
</body>
</html>
