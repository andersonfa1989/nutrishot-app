<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minha Loja Fitness</title>

<script src="cordova.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #fff;
}

header {
  padding: 15px;
  background: #020617;
  text-align: center;
  font-weight: bold;
}

section {
  padding: 15px;
}

.progress-bar {
  background: #1e293b;
  border-radius: 10px;
  overflow: hidden;
  margin: 8px 0;
}

.progress-bar span {
  display: block;
  height: 16px;
  background: #22c55e;
  width: 0%;
  transition: width .3s;
}

footer {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: #020617;
  text-align: center;
  padding: 5px;
}
</style>
</head>

<body>

<header>Dashboard Fitness</header>

<section>
<h3>üìä Progresso Semanal</h3>

<div>Domingo<div class="progress-bar"><span id="d0"></span></div></div>
<div>Segunda<div class="progress-bar"><span id="d1"></span></div></div>
<div>Ter√ßa<div class="progress-bar"><span id="d2"></span></div></div>
<div>Quarta<div class="progress-bar"><span id="d3"></span></div></div>
<div>Quinta<div class="progress-bar"><span id="d4"></span></div></div>
<div>Sexta<div class="progress-bar"><span id="d5"></span></div></div>
<div>S√°bado<div class="progress-bar"><span id="d6"></span></div></div>

<button onclick="verLoja()">üõí Ver Suplementos</button>
<button onclick="mostrarIntersticial()">üì¢ Ver An√∫ncio</button>
<button onclick="mostrarRecompensado()">üéÅ Ganhar Recompensa</button>
</section>

<footer>
  <div id="admob-banner"></div>
</footer>

<script>
let estado = JSON.parse(localStorage.getItem("estado")) || {
  dataAtual: new Date().toDateString(),
  kcalHoje: 0,
  progressoSemanal: {0:0,1:0,2:0,3:0,4:0,5:0,6:0}
};

const META_KCAL = 2000;

document.addEventListener("deviceready", iniciarApp, false);
function iniciarApp() {
  verificarMudancaDeDia();
  atualizarProgresso();
  iniciarAdmob();
}

function verificarMudancaDeDia() {
  const hoje = new Date().toDateString();
  if (estado.dataAtual !== hoje) {
    const diaSemana = new Date(estado.dataAtual).getDay();
    estado.progressoSemanal[diaSemana] = estado.kcalHoje;
    estado.kcalHoje = 0;
    estado.dataAtual = hoje;
    salvar();
  }
}

function atualizarProgresso() {
  for (let i = 0; i < 7; i++) {
    const percentual = Math.min(
      (estado.progressoSemanal[i] / META_KCAL) * 100,
      100
    );
    document.getElementById("d" + i).style.width = percentual + "%";
  }
}

function salvar() {
  localStorage.setItem("estado", JSON.stringify(estado));
}

/* ADMOB */
let admob = null;

function iniciarAdmob() {
  admob = window.admob;

  admob.start();

  admob.banner.show({
    adUnitId: "ca-app-pub-6941311170472131/2257554053",
    position: "bottom"
  });

  admob.interstitial.load({
    adUnitId: "ca-app-pub-6941311170472131/2273031775"
  });

  admob.rewarded.load({
    adUnitId: "ca-app-pub-6941311170472131/4221550021"
  });
}

function mostrarIntersticial() {
  admob.interstitial.show();
}

function mostrarRecompensado() {
  admob.rewarded.show();
}
function verLoja() {
  alert(
`üõí CAT√ÅLOGO

‚Ä¢ Creatina 100g
‚Ä¢ Whey Creme
‚Ä¢ Whey Chocolate
‚Ä¢ Whey Morango
‚Ä¢ Hipercal√≥rico Chocolate
‚Ä¢ Hipercal√≥rico Cookies
‚Ä¢ Termog√™nico
‚Ä¢ L-Creatina 1000mg
‚Ä¢ L-Creatina 2000mg
‚Ä¢ Psyllium`
  );
}
</script>

</body>
</html>
